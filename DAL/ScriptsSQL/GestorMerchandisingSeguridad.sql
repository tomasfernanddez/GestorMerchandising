USE [master]
GO
/****** Object:  Database [GestorMerchandisingSeguridad]    Script Date: 14/11/2025 23:47:19 ******/
CREATE DATABASE [GestorMerchandisingSeguridad]
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET COMPATIBILITY_LEVEL = 150
GO
IF (1 = FULLTEXTSERVICEPROPERTY('IsFullTextInstalled'))
begin
EXEC [GestorMerchandisingSeguridad].[dbo].[sp_fulltext_database] @action = 'enable'
end
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET ANSI_NULL_DEFAULT OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET ANSI_NULLS OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET ANSI_PADDING OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET ANSI_WARNINGS OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET ARITHABORT OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET AUTO_CLOSE ON 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET AUTO_SHRINK OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET AUTO_UPDATE_STATISTICS ON 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET CURSOR_CLOSE_ON_COMMIT OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET CURSOR_DEFAULT  GLOBAL 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET CONCAT_NULL_YIELDS_NULL OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET NUMERIC_ROUNDABORT OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET QUOTED_IDENTIFIER OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET RECURSIVE_TRIGGERS OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET  DISABLE_BROKER 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET AUTO_UPDATE_STATISTICS_ASYNC OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET DATE_CORRELATION_OPTIMIZATION OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET TRUSTWORTHY OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET ALLOW_SNAPSHOT_ISOLATION OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET PARAMETERIZATION SIMPLE 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET READ_COMMITTED_SNAPSHOT OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET HONOR_BROKER_PRIORITY OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET RECOVERY SIMPLE 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET  MULTI_USER 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET PAGE_VERIFY CHECKSUM  
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET DB_CHAINING OFF 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET FILESTREAM( NON_TRANSACTED_ACCESS = OFF ) 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET TARGET_RECOVERY_TIME = 60 SECONDS 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET DELAYED_DURABILITY = DISABLED 
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET ACCELERATED_DATABASE_RECOVERY = OFF  
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET QUERY_STORE = ON
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET QUERY_STORE (OPERATION_MODE = READ_WRITE, CLEANUP_POLICY = (STALE_QUERY_THRESHOLD_DAYS = 30), DATA_FLUSH_INTERVAL_SECONDS = 900, INTERVAL_LENGTH_MINUTES = 60, MAX_STORAGE_SIZE_MB = 1000, QUERY_CAPTURE_MODE = AUTO, SIZE_BASED_CLEANUP_MODE = AUTO, MAX_PLANS_PER_QUERY = 200, WAIT_STATS_CAPTURE_MODE = ON)
GO
USE [GestorMerchandisingSeguridad]
GO
/****** Object:  Table [dbo].[__MigrationHistory]    Script Date: 14/11/2025 23:47:19 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[__MigrationHistory](
	[MigrationId] [nvarchar](150) NOT NULL,
	[ContextKey] [nvarchar](300) NOT NULL,
	[Model] [varbinary](max) NOT NULL,
	[ProductVersion] [nvarchar](32) NOT NULL,
 CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY CLUSTERED 
(
	[MigrationId] ASC,
	[ContextKey] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Bitacora]    Script Date: 14/11/2025 23:47:19 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Bitacora](
	[IdBitacora] [uniqueidentifier] NOT NULL,
	[IdUsuario] [uniqueidentifier] NOT NULL,
	[Fecha] [datetime] NOT NULL,
	[Accion] [nvarchar](100) NOT NULL,
	[Descripcion] [nvarchar](500) NULL,
	[Modulo] [nvarchar](50) NULL,
	[DireccionIP] [nvarchar](100) NULL,
	[Exitoso] [bit] NOT NULL,
	[MensajeError] [nvarchar](500) NULL,
 CONSTRAINT [PK_dbo.Bitacora] PRIMARY KEY CLUSTERED 
(
	[IdBitacora] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Funcion]    Script Date: 14/11/2025 23:47:19 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Funcion](
	[IdFuncion] [uniqueidentifier] NOT NULL,
	[Codigo] [nvarchar](100) NOT NULL,
	[Nombre] [nvarchar](200) NOT NULL,
	[Descripcion] [nvarchar](500) NULL,
	[Activo] [bit] NOT NULL,
 CONSTRAINT [PK_dbo.Funcion] PRIMARY KEY CLUSTERED 
(
	[IdFuncion] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Perfil]    Script Date: 14/11/2025 23:47:19 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Perfil](
	[IdPerfil] [uniqueidentifier] NOT NULL,
	[NombrePerfil] [nvarchar](50) NOT NULL,
	[Descripcion] [nvarchar](200) NULL,
	[Activo] [bit] NOT NULL,
 CONSTRAINT [PK_dbo.Perfil] PRIMARY KEY CLUSTERED 
(
	[IdPerfil] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[PerfilFuncion]    Script Date: 14/11/2025 23:47:19 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[PerfilFuncion](
	[IdPerfil] [uniqueidentifier] NOT NULL,
	[IdFuncion] [uniqueidentifier] NOT NULL,
 CONSTRAINT [PK_dbo.PerfilFuncion] PRIMARY KEY CLUSTERED 
(
	[IdPerfil] ASC,
	[IdFuncion] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Sesion]    Script Date: 14/11/2025 23:47:19 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Sesion](
	[IdSesion] [uniqueidentifier] NOT NULL,
	[IdUsuario] [uniqueidentifier] NOT NULL,
	[FechaInicio] [datetime] NOT NULL,
	[FechaFin] [datetime] NULL,
	[Activa] [bit] NOT NULL,
	[DireccionIP] [nvarchar](100) NULL,
	[UserAgent] [nvarchar](200) NULL,
 CONSTRAINT [PK_dbo.Sesion] PRIMARY KEY CLUSTERED 
(
	[IdSesion] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Usuario]    Script Date: 14/11/2025 23:47:19 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Usuario](
	[IdUsuario] [uniqueidentifier] NOT NULL,
	[NombreUsuario] [nvarchar](50) NOT NULL,
	[PasswordHash] [nvarchar](100) NOT NULL,
	[NombreCompleto] [nvarchar](100) NULL,
	[Email] [nvarchar](100) NULL,
	[Activo] [bit] NOT NULL,
	[FechaCreacion] [datetime] NOT NULL,
	[FechaUltimoAcceso] [datetime] NULL,
	[IntentosLoginFallidos] [int] NOT NULL,
	[Bloqueado] [bit] NOT NULL,
	[FechaBloqueo] [datetime] NULL,
	[IdPerfil] [uniqueidentifier] NOT NULL,
	[IdiomaPreferido] [nvarchar](10) NULL,
 CONSTRAINT [PK_dbo.Usuario] PRIMARY KEY CLUSTERED 
(
	[IdUsuario] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
INSERT [dbo].[__MigrationHistory] ([MigrationId], [ContextKey], [Model], [ProductVersion]) VALUES (N'202511010649334_AgregarFuncionesYRelaciones', N'Services.DAL.Ef.Base.ServicesContext', 0x1F8B0800000000000400ED5C5B6FEBB8117E2FD0FF20F8B1C8C6490E166803671789936C839E5C10278BBE1D3012EDB0D5C52B52D904457F591FFA93FA174A5D48F12A9392627B8BE2BC9C88E2C7E1706E1CCDF83FFFFAF7ECC7F7240EDE608E51969E4D8E0F8F26014CC32C42E9EA6C5290E5777F9CFCF8C3EF7F37BB8A92F7E067F6DE97F23D3A33C567935742D6A7D3290E5F6102F06182C23CC3D9921C8659320551363D393AFAD3F4F8780A29C4846205C1ECB148094A60F507FD739EA5215C9302C4B7590463DC3CA7238B0A35B80309C46B10C2B3C902E66F2884F8F0F2FCEBE1D5F2F002603809CE63047039182F270148D38C0042293D7DC67041F22C5D2DD6F401889F3ED690BEB7047139ABDAC169FBBAEB668E4ECACD4CDB890C2A2C30C9124FC0E32F0D77A6EAF45E3C9E70EE51FE5D513E938F72D7150FCF2617888030CBC12450173B9DC779F9A2C8623A8ED2EA4C0E2B24441F32848380BD77C00583CA4FF9EF2098173129727896C282E4203E081E8A9718857F811F4FD9DF617A9616712C124A49A563D203FAE821CFD630271F8F70D9907F13B51B98CAF3A72A009F6E985B6FF4A7024593E08ED2025E62C8C562BA01E619172047D920946B18BE723A2E01814F541FBC51CEC3B01293E6DC484ED57612DC82F7AF305D9157AAD0475451AFD13B8CD89306F7394554CBE9249217FEEB5E421CE668BD61F1EF1D17EF5E8B8A5F11679DCB8CB0CA25CA61C5CC9B8711D8D9BDD6D53B22547DD93A17591643907A1FC22D4C31F81BBCCAF32C1FFF14EEC01B5A55864159964BFF238CAB71FC8AD6B5E9E5B6E11B7FE93ACF92C72C162C0F1BFBB6C88A3CA40B3F6596179E40BE8244A66C366D4D5AA7A1E314F4B5730DC08ECC1C27DFDFCA8D619EEEB2E425870A527FDDF35CFD0160FC6B96477F06F875FBC6ADDEFB3C4BD631245D9B1FC91A50D98B3F7D95F390A0B7C126A7F25AF31C02D1F2F7F65E15DA734C23C18C3A32D85AC41671832B4E094CA929FD9AAD507A0DE2184519662074F0CB89374D1771F64B016948350AAB6A34FF7D450F305FB652D1334E41D4AC3DE47009731475CBF1A80E82D9F147B8429806DF78B8AB609EC0EA2A982F71A591F1D740188364AFB464C9239AFF528607792FB6785FE755CFDF91EF62C4FBBBAE11C4BEB6DE32D0D61C975B5C7CB24B8B6E5589EB222DE98666756D845A78A9D50B754CD30CED05936E38C49C66D29C1556B522167DEEA5B0CDDEFA6B6C03B02395E5E4FBEB2C9F3A4069E759845663845ABD8CC508AABAC7F7E7B1ED44AD2D639809551FAD76A497462E201EA490F5FC1DE92323DE5F1DD9CCFDC870DD50494586F8B70FD635325C391C641F0C0DE5B7991B7AC6303F5FD15BCDF8F143AF8C4E2D4EA6205D1ED17CBE32EC130D9F639C85A8A244B23982599177769546C1A650A4D1786EA32847A9F6A235D5574AC2D9E40F1ABF3A50B9E56A51B91BEC849D4D85CD75EF59096B6CB4D92E252D65FCECDC376C0B9C3631F158C37C2CAF9F549C1188E754B0A8994429D12D20A2CC5B83B873796596D7E5A3E43C5F451DB9846B984694C84E960E5D9EAFA298F44D1CF21019ED4E6D3B5F7B2EB63DE1F66389BBDCD82FEE1BC57124D1B151E0767A96ACAB97F4D8783B98822D089062ED6DC76C33FDED21B328C45D742CFE626B82635E7F7B6263E6E9FE094DEDB2E91C4267C09C0B4E1D2497CFE13B3144DD34B069026FDCC427AA2494B80B48145B46AF106D94A099264D9C6490366FA061D83EB0A810ED754783B0E4B95404E132A441D8EEDD2A462D1D4608CB5541383E7533E2F54C78CD76855365CA21DAE2E48BFCD384D321C0128004A2D55B91BC57073EA829239D0B5DD1974BFC2510DE0A6107072C119703237B6C5FCFBDEB0CE88E25DCA209817A419D3BB8608D1F1CD8D9830FEAE546E742974374718902DDAD0A7730C0E205876D9FDDB3B8D1E663B3695D60D53C984D2D9558B35BB05ED36BA85099D53C09167559D6FCBB857FB55252634C436C285AE2D4F29508958C155446ABE421BC46392697808097AA1C6C1E25DA6BAA8BB2185CB69AEA85F433637698CD28FF2F7B43B146AD755ABA4F6F10AEE9F692322228770A0DCAA34F0DCA12391083BCA3D6699EC545926EAA9FEA46E32A228359030F3B5653F824E2348FDC3158D99308C29EB9A3484958114A1A70C763854A22147BE64195986C92A81207DCF178B19188C51F7AEC4EAA3692F6288DE888B3A922DF5A90AAE99262D954E574525D6E28076BAEC5FA3B28AE75E636344DA9E111F19421774CB932478494477CA96CAB6D7432DB310FA9AF8B6A2499AF1FF95899FAC3896C65EA679EF6AE2D99D1EC5E3BE4892917CE68B8F2B087AD37D7D448D2687EC57D0DA1C846C4151E7BF282D7D9686CE0233EDE8E5D0B6415B4A5F6BA9094121C195019DC1BCBC96F1A832DA7F9F6E460386D133FFFCCE4FA11DD1AF9238E1D67F8D9A51DC95057FAC05388588EC45F8AAC33ED62C41332B21C59F2345D58ACA6410462CF7CC5D12488FF174159A23411E417EEC112D8A4D8FC05D036D12E7F2C9B278B9F39C7D78D34F2958D7DC9D73C2C1BF0C4ABBEE66B60D5534F39040639F4BA4E8E7DE512BEE18B68C2E3EDEB889C1C32F97B312BECE4D6C50966FF6DB1BF65BECB5854A46792753E8DE2FE4B6E71127A5067FD3A349257B1D3A7A6F9F4C3D6B27DEA2B5CD478D64FC9EECD9A4CDBE6664C2DF556BF320928ED6F28AAD26E1F98C0E4B07CE170F14B3C8F51A501EC855B90A225C4A42E989A9C1C1D9F28DD9CFBD35939C5388A0D994A537BA57C683BE86D2C52442F3EA8FCF4879608E6C3ABC07444ED23DF4D1AC1F7B3C93F2A88D3E0E6AFDF38CA41709FD3F33E0D8E827F0EEB968C00816478B764FA06728A9AEB455CC38B398DD8DFCBD8FEBD8F16545F5043399B0B2F7A7436BE20324A57633F767AB70AF6D2D9F11AF5066BACB169CF41687AF7E48DA642E696BBD1A452ECB01B0B542EABEE23E9C666BADEC6CDDA4C674274D96067731D4AFDF7ABB5D6F5669AD256D77B874ABF514F07F7D0F45A0DF06F965E3D8BAC8E64F68C85A55B6EF11AC9E6C9A063993C57C77EF2F9D6C3BB0FA9D7A98ED70534F85CE58EA0911D8DCF69EE3A04FC344931E5A6B6DD9EF2BF7749911B5E867973A1E1A5AF8B931B60FA38DC4FBC2D68BD2EFDACABA7C31B6421AD09A591CDE9FE04261B0DBB1329BCBBD59996FECD41C6DCA1566CDAAB9B450551982360B9B503053D8BD5ADDF553FA923A6339DEBBDEC161A199C32B6C2719A0ED27284FB2B157EE7D3917CFE54B9E858770B82E1D855378A8D507F3EC9AB19EF376117EC95717B67119C7BE33C4EADEBF0D57CBC674FDD90BEC91D34BBED61A352EFEEB6910440BEE97875C5FD460EDF5A16B1EBA337F7A8E97D02EAD1993BD03A1BD0EA0F9EF482F6520A4C1DCDFAB6A77575A799F0FD5AD73A1AD74CE096CC9EA5A9ADABA5CD84EED7EFD6D1ED6602B76425CC6CB16F4019B733C9B619A7D63BDE22B4B903CF520C610857F40ACACD5D770A230CE51BC31BAD6CE1B8CBE6CDB516A6D8DD50F9B71FDB1FB1DDB0DF492B8646EA4DD8BB76420F622D1197A9756AAFBA05FB6E51368B6289E1A77403EA7540D4290B3FDD4E23028C562D44F943EE290C2577CCDFB94997190B0C148AD82B5A29000111F5D5E739414B10123A1C428CAB9FC3F919C4052C3FEDBEC0E826BD2FC8BA2074CB3079893F446694D145D7FA55CBA34CF3EC7E5DFD08CE185BA064A232777B9F5E14288E38DDD786849705A20C5B7E82F4797D96340A2270F5C191EEA89174036AD8C7A3AD2798AC630A86EFD30578837D687BC6F02B5C81F0839573D941361F84CCF6D92502AB1C24B8C168E7D33FA90C47C9FB0FFF0591C09FB3C1600000, N'6.5.1')
GO
GO
INSERT [dbo].[Funcion] ([IdFuncion], [Codigo], [Nombre], [Descripcion], [Activo]) VALUES (N'10000000-0000-0000-0000-000000000001', N'SEG_PERFILES', N'Administrar perfiles', N'Acceso al módulo de perfiles', 1)
GO
INSERT [dbo].[Funcion] ([IdFuncion], [Codigo], [Nombre], [Descripcion], [Activo]) VALUES (N'10000000-0000-0000-0000-000000000002', N'SEG_USUARIOS', N'Administrar usuarios', N'Acceso al módulo de usuarios', 1)
GO
INSERT [dbo].[Funcion] ([IdFuncion], [Codigo], [Nombre], [Descripcion], [Activo]) VALUES (N'10000000-0000-0000-0000-000000000003', N'CAT_CLIENTES', N'Gestión de clientes', N'Acceso al mantenimiento de clientes', 1)
GO
INSERT [dbo].[Funcion] ([IdFuncion], [Codigo], [Nombre], [Descripcion], [Activo]) VALUES (N'10000000-0000-0000-0000-000000000004', N'CAT_PROVEEDORES', N'Gestión de proveedores', N'Acceso al mantenimiento de proveedores', 1)
GO
INSERT [dbo].[Funcion] ([IdFuncion], [Codigo], [Nombre], [Descripcion], [Activo]) VALUES (N'10000000-0000-0000-0000-000000000005', N'CAT_PRODUCTOS', N'Gestión de productos', N'Acceso al mantenimiento de productos', 1)
GO
INSERT [dbo].[Funcion] ([IdFuncion], [Codigo], [Nombre], [Descripcion], [Activo]) VALUES (N'10000000-0000-0000-0000-000000000006', N'PEDIDOS_VENTAS', N'Gestión de pedidos', N'Acceso al módulo de pedidos', 1)
GO
INSERT [dbo].[Funcion] ([IdFuncion], [Codigo], [Nombre], [Descripcion], [Activo]) VALUES (N'10000000-0000-0000-0000-000000000007', N'PEDIDOS_MUESTRAS', N'Gestión de pedidos de muestra', N'Acceso al módulo de pedidos de muestra', 1)
GO
INSERT [dbo].[Funcion] ([IdFuncion], [Codigo], [Nombre], [Descripcion], [Activo]) VALUES (N'10000000-0000-0000-0000-000000000008', N'REPORTES_OPERATIVOS', N'Reportes operativos', N'Acceso a reportes operativos', 1)
GO
INSERT [dbo].[Funcion] ([IdFuncion], [Codigo], [Nombre], [Descripcion], [Activo]) VALUES (N'10000000-0000-0000-0000-000000000009', N'REPORTES_VENTAS', N'Reportes de ventas', N'Acceso a reportes de ventas', 1)
GO
INSERT [dbo].[Funcion] ([IdFuncion], [Codigo], [Nombre], [Descripcion], [Activo]) VALUES (N'10000000-0000-0000-0000-000000000010', N'REPORTES_FINANCIEROS', N'Reportes financieros', N'Acceso a reportes financieros', 1)
GO
INSERT [dbo].[Usuario] ([IdUsuario], [NombreUsuario], [PasswordHash], [NombreCompleto], [Email], [Activo], [FechaCreacion], [FechaUltimoAcceso], [IntentosLoginFallidos], [Bloqueado], [FechaBloqueo], [IdPerfil], [IdiomaPreferido]) VALUES (N'3086c26a-d282-4c7f-8d33-0ea87dd6ce3e', N'finanzas', N'0C8A1DC7175D047436F18295D409B9BF6D2117D9E1AC2B96B29D2B3A4B2AFD18', N'Finanzas', N'finanzas@thedog.com.ar', 1, CAST(N'2025-11-13T01:51:18.890' AS DateTime), CAST(N'2025-11-13T01:53:58.787' AS DateTime), 0, 0, NULL, N'33333333-3333-3333-3333-333333333333', N'es-AR')
GO
INSERT [dbo].[Usuario] ([IdUsuario], [NombreUsuario], [PasswordHash], [NombreCompleto], [Email], [Activo], [FechaCreacion], [FechaUltimoAcceso], [IntentosLoginFallidos], [Bloqueado], [FechaBloqueo], [IdPerfil], [IdiomaPreferido]) VALUES (N'b26d9289-b4d9-464a-9264-4805d53ab87a', N'ventas', N'0C8A1DC7175D047436F18295D409B9BF6D2117D9E1AC2B96B29D2B3A4B2AFD18', N'Gerente Ventas', N'ger_ventas@thedog.com.ar', 1, CAST(N'2025-11-13T01:52:16.320' AS DateTime), CAST(N'2025-11-13T01:54:39.997' AS DateTime), 0, 0, NULL, N'22222222-2222-2222-2222-222222222222', N'es-AR')
GO
INSERT [dbo].[Usuario] ([IdUsuario], [NombreUsuario], [PasswordHash], [NombreCompleto], [Email], [Activo], [FechaCreacion], [FechaUltimoAcceso], [IntentosLoginFallidos], [Bloqueado], [FechaBloqueo], [IdPerfil], [IdiomaPreferido]) VALUES (N'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', N'admin', N'1589C8A5A8D0A99536584060E2EE0FEDA68B5E30A66EF55C103F6603ED7E9DED', N'Administrador del Sistema', N'admin@thedog.com.ar', 1, CAST(N'2025-09-23T17:51:23.057' AS DateTime), CAST(N'2025-11-13T02:04:12.410' AS DateTime), 0, 0, NULL, N'11111111-1111-1111-1111-111111111111', N'es-AR')
GO
INSERT [dbo].[Usuario] ([IdUsuario], [NombreUsuario], [PasswordHash], [NombreCompleto], [Email], [Activo], [FechaCreacion], [FechaUltimoAcceso], [IntentosLoginFallidos], [Bloqueado], [FechaBloqueo], [IdPerfil], [IdiomaPreferido]) VALUES (N'ea38fa90-9029-441f-b33d-ef2905d3086a', N'vendedor', N'0C8A1DC7175D047436F18295D409B9BF6D2117D9E1AC2B96B29D2B3A4B2AFD18', N'Vendedor', N'ventas@thedog.com.ar', 1, CAST(N'2025-11-13T01:50:51.377' AS DateTime), CAST(N'2025-11-13T01:53:37.890' AS DateTime), 0, 0, NULL, N'44444444-4444-4444-4444-444444444444', N'es-AR')
GO
INSERT [dbo].[Perfil] ([IdPerfil], [NombrePerfil], [Descripcion], [Activo]) VALUES (N'11111111-1111-1111-1111-111111111111', N'Administrador', N'Acceso completo al sistema', 1)
GO
INSERT [dbo].[Perfil] ([IdPerfil], [NombrePerfil], [Descripcion], [Activo]) VALUES (N'22222222-2222-2222-2222-222222222222', N'Gerente de Ventas', N'Gestión de clientes, pedidos y ventas', 1)
GO
INSERT [dbo].[Perfil] ([IdPerfil], [NombrePerfil], [Descripcion], [Activo]) VALUES (N'33333333-3333-3333-3333-333333333333', N'Gerente de Finanzas', N'Gestión financiera y facturación', 1)
GO
INSERT [dbo].[Perfil] ([IdPerfil], [NombrePerfil], [Descripcion], [Activo]) VALUES (N'44444444-4444-4444-4444-444444444444', N'Vendedor', N'Gestión básica de pedidos y clientes', 1)
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'11111111-1111-1111-1111-111111111111', N'10000000-0000-0000-0000-000000000001')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'11111111-1111-1111-1111-111111111111', N'10000000-0000-0000-0000-000000000002')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'11111111-1111-1111-1111-111111111111', N'10000000-0000-0000-0000-000000000003')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'11111111-1111-1111-1111-111111111111', N'10000000-0000-0000-0000-000000000004')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'11111111-1111-1111-1111-111111111111', N'10000000-0000-0000-0000-000000000005')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'11111111-1111-1111-1111-111111111111', N'10000000-0000-0000-0000-000000000006')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'11111111-1111-1111-1111-111111111111', N'10000000-0000-0000-0000-000000000007')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'11111111-1111-1111-1111-111111111111', N'10000000-0000-0000-0000-000000000008')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'11111111-1111-1111-1111-111111111111', N'10000000-0000-0000-0000-000000000009')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'11111111-1111-1111-1111-111111111111', N'10000000-0000-0000-0000-000000000010')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'22222222-2222-2222-2222-222222222222', N'10000000-0000-0000-0000-000000000003')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'22222222-2222-2222-2222-222222222222', N'10000000-0000-0000-0000-000000000004')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'22222222-2222-2222-2222-222222222222', N'10000000-0000-0000-0000-000000000005')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'22222222-2222-2222-2222-222222222222', N'10000000-0000-0000-0000-000000000006')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'22222222-2222-2222-2222-222222222222', N'10000000-0000-0000-0000-000000000007')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'22222222-2222-2222-2222-222222222222', N'10000000-0000-0000-0000-000000000008')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'22222222-2222-2222-2222-222222222222', N'10000000-0000-0000-0000-000000000009')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'33333333-3333-3333-3333-333333333333', N'10000000-0000-0000-0000-000000000006')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'33333333-3333-3333-3333-333333333333', N'10000000-0000-0000-0000-000000000008')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'33333333-3333-3333-3333-333333333333', N'10000000-0000-0000-0000-000000000009')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'33333333-3333-3333-3333-333333333333', N'10000000-0000-0000-0000-000000000010')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'44444444-4444-4444-4444-444444444444', N'10000000-0000-0000-0000-000000000003')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'44444444-4444-4444-4444-444444444444', N'10000000-0000-0000-0000-000000000006')
GO
INSERT [dbo].[PerfilFuncion] ([IdPerfil], [IdFuncion]) VALUES (N'44444444-4444-4444-4444-444444444444', N'10000000-0000-0000-0000-000000000007')
GO
/****** Object:  Index [IX_Funcion_Codigo]    Script Date: 14/11/2025 23:47:19 ******/
CREATE UNIQUE NONCLUSTERED INDEX [IX_Funcion_Codigo] ON [dbo].[Funcion]
(
	[Codigo] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
/****** Object:  Index [IX_IdFuncion]    Script Date: 14/11/2025 23:47:19 ******/
CREATE NONCLUSTERED INDEX [IX_IdFuncion] ON [dbo].[PerfilFuncion]
(
	[IdFuncion] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
GO
/****** Object:  Index [IX_IdPerfil]    Script Date: 14/11/2025 23:47:19 ******/
CREATE NONCLUSTERED INDEX [IX_IdPerfil] ON [dbo].[PerfilFuncion]
(
	[IdPerfil] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, SORT_IN_TEMPDB = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
GO
ALTER TABLE [dbo].[Usuario] ADD  CONSTRAINT [DF_Usuario_Activo]  DEFAULT ((1)) FOR [Activo]
GO
ALTER TABLE [dbo].[Usuario] ADD  CONSTRAINT [DF_Usuario_FechaCreacion]  DEFAULT (getdate()) FOR [FechaCreacion]
GO
ALTER TABLE [dbo].[Usuario] ADD  CONSTRAINT [DF_Usuario_IntentosLoginFallidos]  DEFAULT ((0)) FOR [IntentosLoginFallidos]
GO
ALTER TABLE [dbo].[Usuario] ADD  CONSTRAINT [DF_Usuario_Bloqueado]  DEFAULT ((0)) FOR [Bloqueado]
GO
ALTER TABLE [dbo].[PerfilFuncion]  WITH CHECK ADD  CONSTRAINT [FK_dbo.PerfilFuncion_dbo.Funcion_IdFuncion] FOREIGN KEY([IdFuncion])
REFERENCES [dbo].[Funcion] ([IdFuncion])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[PerfilFuncion] CHECK CONSTRAINT [FK_dbo.PerfilFuncion_dbo.Funcion_IdFuncion]
GO
ALTER TABLE [dbo].[PerfilFuncion]  WITH CHECK ADD  CONSTRAINT [FK_dbo.PerfilFuncion_dbo.Perfil_IdPerfil] FOREIGN KEY([IdPerfil])
REFERENCES [dbo].[Perfil] ([IdPerfil])
ON DELETE CASCADE
GO
ALTER TABLE [dbo].[PerfilFuncion] CHECK CONSTRAINT [FK_dbo.PerfilFuncion_dbo.Perfil_IdPerfil]
GO
ALTER TABLE [dbo].[Usuario]  WITH CHECK ADD
    CONSTRAINT [FK_dbo.Usuario_dbo.Perfil_IdPerfil]
    FOREIGN KEY([IdPerfil]) REFERENCES [dbo].[Perfil] ([IdPerfil]);
GO
ALTER TABLE [dbo].[Usuario] CHECK CONSTRAINT [FK_dbo.Usuario_dbo.Perfil_IdPerfil];
GO

ALTER TABLE [dbo].[Bitacora]  WITH CHECK ADD
    CONSTRAINT [FK_dbo.Bitacora_dbo.Usuario_IdUsuario]
    FOREIGN KEY([IdUsuario]) REFERENCES [dbo].[Usuario] ([IdUsuario]);
GO
ALTER TABLE [dbo].[Bitacora] CHECK CONSTRAINT [FK_dbo.Bitacora_dbo.Usuario_IdUsuario];
GO

ALTER TABLE [dbo].[Sesion]  WITH CHECK ADD
    CONSTRAINT [FK_dbo.Sesion_dbo.Usuario_IdUsuario]
    FOREIGN KEY([IdUsuario]) REFERENCES [dbo].[Usuario] ([IdUsuario]);
GO
ALTER TABLE [dbo].[Sesion] CHECK CONSTRAINT [FK_dbo.Sesion_dbo.Usuario_IdUsuario];
GO

CREATE UNIQUE NONCLUSTERED INDEX [IX_Usuario_NombreUsuario]
ON [dbo].[Usuario]([NombreUsuario] ASC);
GO

CREATE NONCLUSTERED INDEX [IX_Bitacora_IdUsuario]
ON [dbo].[Bitacora]([IdUsuario] ASC);
GO

CREATE NONCLUSTERED INDEX [IX_Sesion_IdUsuario]
ON [dbo].[Sesion]([IdUsuario] ASC);
GO
USE [master]
GO
ALTER DATABASE [GestorMerchandisingSeguridad] SET  READ_WRITE 
GO